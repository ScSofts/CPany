var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;"undefined"!=typeof require&&require;import{e as l,B as o,j as n,q as i,o as u,b as d,m,u as c,w as b,d as f,t as g,n as h,h as p}from"./vendor.5658d620.js";import{u as v}from"./users.bf5649c7.js";import{C,a as y}from"./c-table.debe660e.js";import{_ as w}from"./user-link.69187dfa.js";import{d as j,b as k,h as _,j as S,k as O}from"./index.4eeec323.js";import"./load.8c215a92.js";const x={class:"divide-y"},q=f("h2",{class:"mb-4"},"成员",-1),T={class:"font-600"},P={key:0},R=f("div",{class:"my-4 px-3"},"人捏？",-1),F={class:"mt-4 pt-4"},B={class:"text-gray-400"},E=l({setup(e){var l,E;const I=o(),N=String(null!=(l=I.query.sort)?l:"最近通过"),z=String(null!=(E=I.query.order)?E:"desc"),A=n(k),D=e=>{const l=e.submissions.length,o=e.submissions.filter((({v:e})=>0!==e)).length,n=(0!==l?(100*o/l).toFixed(1):"0.0")+" %",i=e.submissions.filter((({t:e})=>e>=A.value)).length,u=e.submissions.filter((({t:e,v:t})=>e>=A.value&&0!==t)).length,d=e.contests.filter((({t:e})=>e>=A.value)).length,m=e.submissions.filter((({v:e})=>1===e)).sort(((e,t)=>t.t-e.t));return((e,l)=>{for(var o in l||(l={}))s.call(l,o)&&r(e,o,l[o]);if(t)for(var o of t(l))a.call(l,o)&&r(e,o,l[o]);return e})({subCount:l,okCount:o,okRate:n,recentSubCount:i,recentOkCount:u,recentContest:d,lastSolveTime:m.length>0?m[0].t:0},e)},G=i((()=>v.map(D))),H=S((e=>e.recentOkCount)),J=S((e=>e.recentContest)),K=S((e=>e.lastSolveTime)),L=S((e=>e.recentSubCount)),M=S((e=>e.okCount)),Q=S((e=>e.contests.length)),U=S((e=>e.subCount)),V=S((e=>Number.parseFloat(e.okRate))),W=O((e=>e.name));function X(e){return _(e,H,J,K,L,M,Q,U,V,W)}return(e,t)=>(u(),d("div",x,[q,m(c(C),{data:c(G),cache:"members","default-sort":c(N),"default-sort-order":c(z)},{columns:b((({index:e,row:t})=>[m(c(y),{label:"#",width:"3em",align:"center"},{default:b((()=>[f("span",T,g(e+1),1)])),_:2},1024),m(c(y),{label:"姓名"},{default:b((()=>[m(w,{name:t.name},null,8,["name"])])),_:2},1024),m(c(y),{label:"最近通过",width:"7em",align:"right",sort:X(c(H))},{default:b((()=>[h(g(t.recentOkCount),1)])),_:2},1032,["sort"]),m(c(y),{label:"最近提交",width:"7em",align:"right",sort:X(c(L))},{default:b((()=>[h(g(t.recentSubCount),1)])),_:2},1032,["sort"]),m(c(y),{label:"最近比赛",width:"7em",align:"right",sort:X(c(J))},{default:b((()=>[h(g(t.recentContest),1)])),_:2},1032,["sort"]),m(c(y),{label:"最新通过",width:"10em",align:"center",sort:X(c(K))},{default:b((()=>[t.lastSolveTime>0?(u(),d("span",P,g(c(j)(t.lastSolveTime).value),1)):p("v-if",!0)])),_:2},1032,["sort"]),m(c(y),{label:"通过",width:"5em",align:"right",sort:X(c(M))},{default:b((()=>[h(g(t.okCount),1)])),_:2},1032,["sort"]),m(c(y),{label:"提交",width:"5em",align:"right",sort:X(c(U))},{default:b((()=>[h(g(t.subCount),1)])),_:2},1032,["sort"]),m(c(y),{label:"通过率",width:"6em",align:"right",sort:X(c(V))},{default:b((()=>[h(g(t.okRate),1)])),_:2},1032,["sort"]),m(c(y),{label:"比赛",width:"5em",align:"right",sort:X(c(Q))},{default:b((()=>[h(g(t.contests.length),1)])),_:2},1032,["sort"])])),empty:b((()=>[R])),_:1},8,["data","default-sort","default-sort-order"]),f("div",F,[f("span",B,"最近开始于 "+g(c(j)(A.value).value),1)])]))}});export{E as default};
