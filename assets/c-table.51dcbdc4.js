import{o as e,b as l,d as a,j as n,u as t,q as r,x as s,e as o,p as i,y as u,l as c,m as d,w as p,h as v,f,F as g,z as m,t as b,n as h,r as w,A as y}from"./vendor.5658d620.js";import{_ as x,i as k}from"./index.8cacedb6.js";const C={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},P=[a("path",{d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4z",fill:"currentColor"},null,-1)];var M={name:"mdi-arrow-down",render:function(a,n){return e(),l("svg",C,P)}};const S={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},L=[a("path",{d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12z",fill:"currentColor"},null,-1)];var j={name:"mdi-arrow-up",render:function(a,n){return e(),l("svg",S,L)}};const z=new Map;var _=o({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(e,{slots:l}){const{align:a,center:n}=i(e),t=["px-3","py-2","center"===a.value||n.value?"text-center":"right"===a.value?"text-right":"text-left"];return()=>u("td",{class:t},l.default&&l.default(e))}});const A={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},q=[a("path",{d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42z",fill:"currentColor"},null,-1)];var N={name:"mdi-chevron-left",render:function(a,n){return e(),l("svg",A,q)}};const B={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},R=[a("path",{d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42z",fill:"currentColor"},null,-1)];var F={name:"mdi-chevron-right",render:function(a,n){return e(),l("svg",B,R)}};const V={key:0,class:"mb-2 grid grid-cols-2 gap-2"},Y={class:"flex justify-center"},T=a("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),W=a("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),E=a("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),I=a("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),O=o({props:{isMobile:{type:Boolean,required:!1},pageView:{type:Number,required:!1},current:{type:Number,required:!0},first:{type:Number,required:!0},last:{type:Number,required:!0},pageSize:{type:Number,required:!0},nextPage:{type:Function,required:!0},prePage:{type:Function,required:!0},goPage:{type:Function,required:!0}},setup(n){const s=n,{isMobile:o,pageView:u,current:w,first:y,last:x}=i(s),k=r((()=>{var e;return null!=(e=null==u?void 0:u.value)?e:5})),C=r((()=>{var e;return null!=(e=null==o?void 0:o.value)&&e}));return(r,s)=>{const o=c("c-button");return e(),l(g,null,[t(C)?(e(),l("div",V,[d(o,{padding:"p-2",onClick:n.prePage,disable:t(w)<=t(y)},{default:p((()=>[d(t(N))])),_:1},8,["onClick","disable"]),d(o,{padding:"p-2",onClick:n.nextPage,disable:t(w)+1>=t(x)},{default:p((()=>[d(t(F))])),_:1},8,["onClick","disable"])])):v("v-if",!0),a("div",Y,[t(C)?v("v-if",!0):(e(),f(o,{key:0,padding:"p-2",onClick:n.prePage,disable:t(w)<=t(y)},{default:p((()=>[d(t(N))])),_:1},8,["onClick","disable"])),t(x)-t(y)<=t(k)?(e(!0),l(g,{key:1},m(t(x)-t(y),(l=>(e(),f(o,{key:l,class:"ml-2",info:l+t(y)===t(w)+1,onClick:e=>n.goPage(l+t(y)-1)},{default:p((()=>[a("span",null,b(l+t(y)),1)])),_:2},1032,["info","onClick"])))),128)):t(w)-t(y)<t(k)?(e(),l(g,{key:2},[(e(!0),l(g,null,m(t(k),(l=>(e(),f(o,{key:l,class:"ml-2",info:l+t(y)===t(w)+1,onClick:e=>n.goPage(l+t(y)-1)},{default:p((()=>[a("span",null,b(l+t(y)),1)])),_:2},1032,["info","onClick"])))),128)),T,d(o,{class:"ml-2",onClick:s[0]||(s[0]=e=>n.goPage(t(x)-1))},{default:p((()=>[h(b(t(x)),1)])),_:1})],64)):t(x)-t(w)<=t(k)?(e(),l(g,{key:3},[d(o,{class:"ml-2",onClick:s[1]||(s[1]=e=>n.goPage(t(y)))},{default:p((()=>[h(b(t(y)+1),1)])),_:1}),W,(e(!0),l(g,null,m(t(k),(l=>(e(),f(o,{key:l,class:"ml-2",info:t(x)-t(k)+l===t(w)+1,onClick:e=>n.goPage(t(x)-t(k)+l-1)},{default:p((()=>[a("span",null,b(t(x)-t(k)+l),1)])),_:2},1032,["info","onClick"])))),128))],64)):(e(),l(g,{key:4},[d(o,{class:"ml-2",onClick:s[2]||(s[2]=e=>n.goPage(t(y)))},{default:p((()=>[h(b(t(y)+1),1)])),_:1}),E,(e(!0),l(g,null,m(t(k),(l=>(e(),f(o,{key:l,class:"ml-2",info:t(w)-Math.floor(t(k)/2)+l===t(w)+1,onClick:e=>n.goPage(t(w)-Math.floor(t(k)/2)+l-1)},{default:p((()=>[a("span",null,b(t(w)-Math.floor(t(k)/2)+l),1)])),_:2},1032,["info","onClick"])))),128)),I,d(o,{class:"ml-2",onClick:s[3]||(s[3]=e=>n.goPage(t(x)-1))},{default:p((()=>[h(b(t(x)),1)])),_:1})],64)),t(C)?v("v-if",!0):(e(),f(o,{key:5,padding:"p-2",class:"ml-2",onClick:n.nextPage,disable:t(w)+1>=t(x)},{default:p((()=>[d(t(F))])),_:1},8,["onClick","disable"]))])],64)}}}),D={class:"select relative"},H={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};var U=x({},[["render",function(n,t){return e(),l("div",D,[a("select",H,[w(n.$slots,"default")])])}]]);const $=new Map;var G=o({name:"CTable",components:{IconDown:M,IconUp:j,CTablePage:O,CSelect:U},props:{cache:{type:String},data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(e,{slots:l}){var a,o;const{data:d,defaultSort:p,defaultSortOrder:v,mobile:f,pageSize:m,mobilePageSize:b}=i(e),h=r((()=>0===d.value.length)),{isMobile:w,clean:x}=function(e){const l=n(window.innerWidth),a=n(l.value<=t(e)),r=()=>{l.value=window.innerWidth,a.value=l.value<=t(e)};return window.addEventListener("resize",r,{passive:!0}),{width:l,isMobile:a,clean:()=>window.removeEventListener("resize",r)}}(f);y((()=>x()));const C=r((()=>{var e;return w.value&&null!=(e=b.value)?e:m.value})),P=e.cache?$.get(e.cache):void 0,M=r((()=>k(C.value))),{current:S,pageLength:L,L:j,R:A,nextPage:q,prePage:N,goPage:B}=function(e,l,a){var o;const i=r((()=>t(l).length)),u=r((()=>{var l;return Math.max(1,null!=(l=t(e))?l:i.value)})),c=r((()=>Math.ceil(i.value/u.value))),d=n(a&&null!=(o=z.get(a))?o:0),p=r((()=>d.value*u.value)),v=r((()=>Math.min(i.value,p.value+u.value)));s(d,(e=>{a&&z.set(a,e)}));const f=r((()=>d.value+1<c.value&&v.value<i.value)),g=r((()=>d.value>0&&p.value>0));return{current:d,pageLength:c,L:p,R:v,hasNextPage:f,nextPage:()=>{f.value&&(d.value+=1)},hasPrePage:g,prePage:()=>{g.value&&(d.value-=1)},goPage:e=>{const l=t(e);0<=l&&l<c.value&&(d.value=l)}}}(C,d,e.cache),R=n(null!=(a=null==P?void 0:P.field)?a:p.value),F=n(null!=(o=null==P?void 0:P.order)?o:v.value),V=()=>{e.cache&&$.set(e.cache,{field:R.value,order:F.value})};V();const Y=e=>{R.value=e,F.value=v.value,V()},T=()=>{"desc"===F.value?F.value="asc":F.value="desc",V()},W=e=>{if(!e)return[];const l=[];for(const a of e)if(a.type===g&&Array.isArray(a.children))for(const e of a.children)null===e||"object"!=typeof e||Array.isArray(e)||l.push(e);else l.push(a);return l.filter((e=>e.type===_))},E=W(l.columns?l.columns({}):[]),I=r((()=>(e=>{var l,a,n;if(k(R.value)){for(const t of E){if((null!=(a=null==(l=t.props)?void 0:l.label)?a:"")===R.value){const l=e.sort(null==(n=t.props)?void 0:n.sort);return"desc"===F.value?l.reverse():l}}return e}return e})(d.value))),O=r((()=>I.value.slice(j.value,A.value))),D=()=>u(c("c-table-page"),{current:S.value,first:0,last:L.value,pageSize:C.value,nextPage:q,prePage:N,goPage:B,pageView:w.value?3:5,isMobile:w.value});return()=>{return w.value?u("div",{class:["mobile-table"]},[!h.value&&(()=>{const e=E.map((e=>{var l,a,n;if(k(null==(l=e.props)?void 0:l.sort)){const l=null!=(n=null==(a=e.props)?void 0:a.label)?n:"";return u("option",{value:l},[l])}return null})).filter((e=>k(e)));return e.length>0&&u("div",{class:["my-4","flex","justify-between"]},[u(c("c-select"),{class:["w-full","mr-2"],onChange(e){var l;const a=null==(l=e.target)?void 0:l.value;k(a)&&Y(a)}},e),u(c("c-button"),{info:!0,onClick:T},["desc"===F.value?u(c("icon-down"),{}):u(c("icon-up"),{})])])})(),O.value.map(((e,a)=>{const n=W(l.columns&&l.columns({row:e,index:a+j.value,mobile:!0}));return u("div",{class:["box","p-0","my-4"]},n.map((e=>{var l,a;const n=null!=(l=e.props&&e.props["mobile-header-class"])?l:[];return u("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[u("div",{class:["py-2","font-600","text-left","flex","items-center",...n]},null==(a=e.props)?void 0:a.label),u(e,{class:["block"]})])})))})),!h.value&&M.value&&D(),h.value&&l.empty&&l.empty({})]):u("div",{},[u("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[u("thead",{},u("tr",{},E.map((e=>{var l,a,n,t,r,s,o,i,d;const p=k(null==(l=e.props)?void 0:l.sort),v=p&&(null!=(n=null==(a=e.props)?void 0:a.label)?n:"")===R.value,f={width:null==(t=e.props)?void 0:t.width,borderWidth:"0 0 2px 0"},g="center"===(null==(r=e.props)?void 0:r.align)||k(null==(s=e.props)?void 0:s.center)&&!1!==(null==(o=e.props)?void 0:o.center)?"justify-center":"right"===(null==(i=e.props)?void 0:i.align)?"justify-end":"justify-start";return u("th",{style:f,class:["select-none","font-600","px-3","py-2","border-solid",v?"border-[#7a7a7a]":"border-[#dbdbdb]",p?"cursor-pointer":null,p?"hover:border-[#7a7a7a]":null]},u("div",{class:["flex","items-center",g],onClick:p?()=>{var l,a;v?T():Y(null!=(a=null==(l=e.props)?void 0:l.label)?a:"")}:void 0},[p?u("desc"===F.value?c("icon-down"):c("icon-up"),{class:[!v&&"hidden"]}):"",u("span",{},null==(d=e.props)?void 0:d.label)]))})))),u("tbody",{},(e=O.value,e.map(((e,a)=>u("tr",{},l.columns&&W(l.columns({row:e,index:a+j.value})))))))]),!h.value&&M.value&&D(),h.value&&l.empty&&l.empty({})]);var e}}});export{G as C,_ as a,U as b};
